@{
    Layout = null;
    var active = (ViewBag.Active as string) ?? "";
    var title = (ViewBag.Title as string) ?? "Admin";
    var user = Session["User"] as string;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Admin · @title</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background: #f6f8fb;
        }

        .sidebar {
            min-height: 100vh;
            background: #0d6efd;
        }

            .sidebar .nav-link {
                color: #cfe3ff;
                padding: .65rem 1rem;
            }

                .sidebar .nav-link.active, .sidebar .nav-link:hover {
                    color: #fff;
                    background: rgba(255,255,255,.15);
                }

        .topbar {
            background: #fff;
            border-bottom: 1px solid #eaeef3;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row g-0">

            <!-- Sidebar: chỉ hiện từ md -->
            <aside class="d-none d-md-block col-md-3 col-lg-2 p-0 sidebar">
                <div class="p-3 text-white fw-bold">Admin Panel</div>
                <nav class="nav flex-column">
                    <a class="nav-link @(active=="Home"?"active":"")" href="@Url.Action("Home","Admin")">🏠 Trang chủ</a>
                    <a class="nav-link @(active=="Pending"?"active":"")" href="@Url.Action("Pending","Admin")">⏳ Duyệt tài khoản</a>
                    <a class="nav-link @(active=="History"?"active":"")" href="@Url.Action("History","Admin")">🕘 Lịch sử tài khoản</a>
                    <a class="nav-link @(active=="CreateDoctor"?"active":"")" href="@Url.Action("CreateDoctor","Admin")">👨‍⚕️ Tạo bác sĩ</a>
                    <a class="nav-link @(active=="Patients"?"active":"")" href="@Url.Action("Patients","Admin")">🧑‍🤝‍🧑 Quản lý bệnh nhân</a>
                    <a class="nav-link @(active=="Doctors"?"active":"")" href="@Url.Action("Doctors","Admin")">👩‍⚕️ Quản lý bác sĩ</a>
                    <hr class="text-white-50" />
                    <a class="nav-link" href="@Url.Action("Index","Home")">← Về website</a>
                    <a class="nav-link" href="@Url.Action("Logout","Account")">Đăng xuất</a>
                </nav>
            </aside>

            <!-- Content -->
            <main class="col-12 col-md-9 col-lg-10 px-4">
                <header class="topbar d-flex justify-content-between align-items-center py-3 px-2">
                    <div class="fs-5 fw-semibold">@title</div>
                    <div class="d-flex align-items-center gap-2">
                        <span class="text-muted small d-none d-sm-inline">Xin chào, @user</span>

                        <!-- Nút mở menu (mobile) -->
                        <button class="btn btn-outline-primary btn-sm d-md-none"
                                type="button"
                                data-bs-toggle="offcanvas"
                                data-bs-target="#adminMenu"
                                aria-controls="adminMenu">
                            ☰ Menu
                        </button>

                        <!-- Nút về Home Admin (ẩn trên mobile nếu muốn) -->
                        <a class="btn btn-outline-secondary btn-sm d-none d-md-inline"
                           href="@Url.Action("Home","Admin")" title="Trang chủ Admin">🏠</a>
                    </div>
                </header>

                <div class="py-3">
                    @if (TempData["Msg"] != null)
                    {<div class="alert alert-success">@TempData["Msg"]</div>}
                    @if (TempData["Err"] != null)
                    {<div class="alert alert-danger">@TempData["Err"]</div>}

                    @RenderBody()
                </div>

                @RenderSection("Scripts", required: false)
            </main>
        </div>
    </div>

    <!-- Offcanvas menu cho mobile -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="adminMenu" aria-labelledby="adminMenuLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="adminMenuLabel">Admin Panel</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Đóng"></button>
        </div>
        <div class="offcanvas-body p-0">
            <nav class="nav flex-column">
                <a class="nav-link @(active=="Home"?"active":"")" href="@Url.Action("Home","Admin")">🏠 Trang chủ</a>
                <a class="nav-link @(active=="Pending"?"active":"")" href="@Url.Action("Pending","Admin")">⏳ Duyệt tài khoản</a>
                <a class="nav-link @(active=="History"?"active":"")" href="@Url.Action("History","Admin")">🕘 Lịch sử tài khoản</a>
                <a class="nav-link @(active=="CreateDoctor"?"active":"")" href="@Url.Action("CreateDoctor","Admin")">👨‍⚕️ Tạo bác sĩ</a>
                <a class="nav-link @(active=="Patients"?"active":"")" href="@Url.Action("Patients","Admin")">🧑‍🤝‍🧑 Quản lý bệnh nhân</a>
                <a class="nav-link @(active=="Doctors"?"active":"")" href="@Url.Action("Doctors","Admin")">👩‍⚕️ Quản lý bác sĩ</a>
                <hr />
                <a class="nav-link" href="@Url.Action("Index","Home")">← Về website</a>
                <a class="nav-link" href="@Url.Action("Logout","Account")">Đăng xuất</a>
            </nav>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
